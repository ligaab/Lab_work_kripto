<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bitcoin – Golden & Death Cross</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    body {
        background: #121212;
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 20px;
    }
    h1 {
        color: #f1c40f;
    }
    canvas {
        background: #1e1e1e;
        border-radius: 10px;
        margin-top: 20px;
        max-width: 900px;
    }
</style>
</head>
<body>
<h1>Bitcoin – Golden & Death Cross vizualizācija</h1>
<canvas id="chart" width="900" height="400"></canvas>

<script>
const ctx = document.getElementById('chart').getContext('2d');

// Demo dati (var aizstāt ar reāliem no CoinGecko vai CSV)
const labels = Array.from({length: 100}, (_, i) => `Diena ${i+1}`);
const price = labels.map((_, i) => 8000 + Math.sin(i/5) * 1000 + i*5); // galvenā līkne
const ma50 = price.map((p, i) => 7900 + Math.sin(i/8)*500 + i*4);
const ma200 = price.map((p, i) => 8100 + Math.cos(i/15)*300 + i*2);

// Izveidojam gradientus
const gradientPrice = ctx.createLinearGradient(0, 0, 0, 400);
gradientPrice.addColorStop(0, "rgba(0,255,100,0.8)");
gradientPrice.addColorStop(1, "rgba(0,100,255,0.8)");

const gradientMA50 = ctx.createLinearGradient(0, 0, 900, 0);
gradientMA50.addColorStop(0, "#f39c12");
gradientMA50.addColorStop(1, "#e67e22");

const gradientMA200 = ctx.createLinearGradient(0, 0, 900, 0);
gradientMA200.addColorStop(0, "#3498db");
gradientMA200.addColorStop(1, "#2ecc71");

// Atrodam “cross” punktus
let crosses = [];
for (let i = 1; i < ma50.length; i++) {
    const prevDiff = ma50[i-1] - ma200[i-1];
    const diff = ma50[i] - ma200[i];
    if (prevDiff < 0 && diff > 0) crosses.push({x: labels[i], y: ma50[i], type: 'golden'});
    if (prevDiff > 0 && diff < 0) crosses.push({x: labels[i], y: ma50[i], type: 'death'});
}

// Uzzīmējam grafiku
new Chart(ctx, {
    type: 'line',
    data: {
        labels,
        datasets: [
            {
                label: 'Bitcoin cena',
                data: price,
                borderColor: gradientPrice,
                borderWidth: 2,
                tension: 0.2,
                fill: false
            },
            {
                label: 'MA 50 (īsa tendence)',
                data: ma50,
                borderColor: gradientMA50,
                borderWidth: 2,
                tension: 0.2,
                fill: false
            },
            {
                label: 'MA 200 (ilgtermiņa tendence)',
                data: ma200,
                borderColor: gradientMA200,
                borderWidth: 2,
                tension: 0.2,
                fill: false
            },
            {
                label: 'Krustošanās punkti',
                data: crosses.map(p => ({x: p.x, y: p.y})),
                pointBackgroundColor: crosses.map(p => p.type === 'golden' ? '#00ff99' : '#ff3333'),
                pointBorderColor: '#fff',
                pointRadius: 6,
                showLine: false
            }
        ]
    },
    options: {
        plugins: {
            legend: { labels: { color: '#fff' } },
            tooltip: {
                callbacks: {
                    label: (context) => {
                        const point = crosses.find(c => c.x === context.label);
                        if (point) {
                            return point.type === 'golden'
                                ? 'Golden Cross – bullish reversal'
                                : 'Death Cross – bearish reversal';
                        }
                        return `${context.dataset.label}: ${context.parsed.y.toFixed(2)} USD`;
                    }
                }
            }
        },
        scales: {
            x: { ticks: { color: '#ccc' }, grid: { color: '#333' } },
            y: { ticks: { color: '#ccc' }, grid: { color: '#333' } }
        }
    }
});
</script>
</body>
</html>
